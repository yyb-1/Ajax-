<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登陆</title>
    <h1>登陆信息</h1>
</head>
<body>

<!--<form action="/login/" method="post">-->
<!--    User: <input type="text" name="username" value="{{ uname }}">-->
<!--    Password: <input type="text" name="password">-->
<!--    <button>Submit</button>-->
<!--    <span style="color:Red">{{ error }}</span>-->

<!--</form>-->

<p>下面是ajax请求</p>
<div>
    <label>
        User: <input type="text" name="username" id="username">
    </label>
    <label>
        Password: <input type="test" name="password" id="password">
    </label>
    <button id="btn">Submit</button>
    <span id="error_msg" style="color:Red; font-size: 12px"></span>

</div>
</body>
<script src='/static/jquery-3.5.1.min.js'></script>
<script>
    $('#btn').click(function () {
        var uname = $('#username').val();  //#后面的来自标签的id熟悉，而非name属性
        var pwd = $('#password').val();

        $.ajax({
            url: '/login_ajax/',    //可以是相对路径，也可以是绝对路径
            type: 'post',
            data: {xx: uname, pp: pwd},

            success:function (res) {
                //success对应的function表示请求成功（正常）之后自动执行的函数
                //res名字随便写， res得到的就是相应数据
                if (res === 'ok') {
                    //登陆成功
                    location.href = '/home/';
                }
                else {
                    //登陆失败
                    $('#error_msg').text('用户名或密码错误')
                }



                console.log(res, typeof res);
            }
        })

    })

</script>


</html>